#!/bin/bash 
echo "Pre-commit: Lint checks..."
REPO_ROOT=$(git rev-parse --show-toplevel)

if command -v pylint >/dev/null 2>&1; then
    PY_FILES=$(git diff --cached --name-only --diff-filter=ACM -- '*.py')
    
    if [ -n "$PY_FILES" ]; then
        echo "Linting staged Python files..."
        for file in $PY_FILES; do
            pylint "$REPO_ROOT/$file" || { echo "Linting failed on $file"; exit 1; }
        done
    fi
else
    echo "pylint not installed. Skipping linting."
fi